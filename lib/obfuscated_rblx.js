const a0_0x2fc709=a0_0x55ed;(function(_0x347573,_0x35745a){const _0x87ad11=a0_0x55ed,_0x3d5fe6=_0x347573();while(!![]){try{const _0x3479a1=parseInt(_0x87ad11(0x15f))/0x1+parseInt(_0x87ad11(0x160))/0x2*(-parseInt(_0x87ad11(0x118))/0x3)+-parseInt(_0x87ad11(0x156))/0x4*(-parseInt(_0x87ad11(0x11d))/0x5)+-parseInt(_0x87ad11(0x163))/0x6*(-parseInt(_0x87ad11(0x138))/0x7)+parseInt(_0x87ad11(0x11f))/0x8+parseInt(_0x87ad11(0x115))/0x9*(-parseInt(_0x87ad11(0x124))/0xa)+-parseInt(_0x87ad11(0x112))/0xb;if(_0x3479a1===_0x35745a)break;else _0x3d5fe6['push'](_0x3d5fe6['shift']());}catch(_0x233406){_0x3d5fe6['push'](_0x3d5fe6['shift']());}}}(a0_0x1151,0x18d43));const {getHashUrl,str_replace}=require(a0_0x2fc709(0x125)),RBXException=require('../lib/error.js'),util=require(a0_0x2fc709(0x161));function a0_0x1151(){const _0x1fdbcf=['get','Successfully\x20saved\x20','&maxRows=12&startIndex=0','url','https://thumbnails.roblox.com/v1/users/avatar-3d?userId=','352x352','Asset','textures','Successfully\x20clearing\x20cdn\x20storage!','https://thumbnails.roblox.com/v1/assets-thumbnail-3d?assetId=','getItemObj','data','\x27s\x20avatar\x20to\x20CDN\x20Directory!','obj','tex','itemDetail','\x20&&\x20cd\x20user\x20&&\x20rm\x20-rf\x20*\x20&&\x20cd\x20../item\x20&&\x20rm\x20-rf\x20*','exec','/cdn/user/','error','saveUserObj','getItemShot','E_ITEMNOTFOUND','nodebuffer','40mYGKNu','promisify','https://www.roblox.com/search/users/results?keyword=','stat','/cdn/item/','/user/','::Avatar:352x352:webp:regular','getUIDbyUsername','Avatar','97663YPhfVS','31054YZdfCo','util','.mtl','6954ZqwUMa','/user/\x20&&\x20mkdir\x20','zipUserObjtoBuffer','901087POTtJG','cd\x20','writeFile','4869FMABSJ','webp','child_process','3gQMobz','/item/','\x20asset\x20to\x20CDN\x20Directory!','imageUrl','E_USERNOTFOUND','20530nqHNot','jszip','1079424oYGrje','file','arraybuffer','path','/item/\x20&&\x20mkdir\x20','1720QvcfPV','./global.js','clearCDN','_Tex','getUserObj','UserSearchResults','::Asset:420x420:webp:regular','https://users.roblox.com/v1/users/','420x420','map','generateAsync','dir','post','creatorTargetId','.obj','https://thumbnails.roblox.com/v1/batch','getUserShot','name','mtl','uidDetail','112ndPmIV','hash','.png','UserId','resolve','all'];a0_0x1151=function(){return _0x1fdbcf;};return a0_0x1151();}let path=require(a0_0x2fc709(0x122)),axios=require('axios');const he=require('he'),jszip=require(a0_0x2fc709(0x11e)),fs=require('fs')['promises'],exec=util[a0_0x2fc709(0x157)](require(a0_0x2fc709(0x117))[a0_0x2fc709(0x14f)]);class RBX{constructor(_0x249133){const _0x392263=a0_0x2fc709;this[_0x392263(0x12f)]=path[_0x392263(0x13c)](__dirname,_0x249133);}async[a0_0x2fc709(0x15d)](_0x25ee96){const _0x550b4d=a0_0x2fc709,_0x424e39=_0x550b4d(0x158)+_0x25ee96+_0x550b4d(0x140);try{const {data:_0x43326b}=await axios[_0x550b4d(0x13e)](_0x424e39);if(_0x43326b['UserSearchResults']==null)throw new RBXException('E_USERNOTFOUND');return _0x43326b[_0x550b4d(0x129)][0x0][_0x550b4d(0x13b)];}catch(_0x376d77){throw _0x376d77;}}async['uidDetail'](_0x46aa4e){const _0x1bd821=a0_0x2fc709,_0x40a68a=_0x1bd821(0x12b)+parseInt(_0x46aa4e);try{let {data:_0x1f777e}=await axios[_0x1bd821(0x13e)](_0x40a68a);const _0x135c56=await this['getUserShot'](_0x1f777e['id']);return _0x1f777e[_0x1bd821(0x11b)]=_0x135c56,_0x1f777e;}catch(_0x97a735){throw _0x97a735;}}async[a0_0x2fc709(0x134)](_0x27c4b9){const _0x4a7f67=a0_0x2fc709,_0x153d56='https://thumbnails.roblox.com/v1/batch',_0x4d97f9=[{'requestId':parseInt(_0x27c4b9)+_0x4a7f67(0x15c),'type':_0x4a7f67(0x15e),'targetId':parseInt(_0x27c4b9),'token':'','format':_0x4a7f67(0x116),'size':_0x4a7f67(0x143)}];try{const {data:_0x31ff66}=await axios[_0x4a7f67(0x130)](_0x153d56,_0x4d97f9);return _0x31ff66['data'][0x0]['imageUrl'];}catch(_0x5e5e38){throw _0x5e5e38;}}async[a0_0x2fc709(0x128)](_0x1a5ce1){const _0x1cd32f=a0_0x2fc709,_0x481ce7=_0x1cd32f(0x142)+parseInt(_0x1a5ce1);try{const _0x3ef024=await axios[_0x1cd32f(0x13e)](_0x481ce7),{data:_0x4e75ee}=await axios[_0x1cd32f(0x13e)](_0x3ef024[_0x1cd32f(0x149)][_0x1cd32f(0x11b)]),_0x14779f=_0x4e75ee[_0x1cd32f(0x145)][_0x1cd32f(0x12d)](_0x3d71c3=>{return getHashUrl(_0x3d71c3);}),_0x1658e9={'hash':_0x4e75ee[_0x1cd32f(0x145)],'url':_0x14779f},_0x23fa2d={'obj':getHashUrl(_0x4e75ee[_0x1cd32f(0x14b)]),'mtl':getHashUrl(_0x4e75ee[_0x1cd32f(0x136)]),'tex':_0x1658e9};return _0x23fa2d;}catch(_0x4fd29e){throw _0x4fd29e;}}async[a0_0x2fc709(0x152)](_0x969598){const _0x5bec8f=a0_0x2fc709,_0x361001=this[_0x5bec8f(0x12f)];try{const _0x1017ff=await this['getUIDbyUsername'](_0x969598);await this[_0x5bec8f(0x137)](_0x1017ff);}catch(_0x3eb37e){throw new RBXException(_0x5bec8f(0x11c));}try{await fs['stat'](_0x361001+_0x5bec8f(0x15b)+_0x969598);}catch(_0x1ad05a){await exec(_0x5bec8f(0x113)+_0x361001+_0x5bec8f(0x164)+_0x969598);}try{const _0x577b12=await this[_0x5bec8f(0x15d)](_0x969598),_0xe39ba1=await this[_0x5bec8f(0x128)](_0x577b12);let _0x51cc00=await axios({'url':_0xe39ba1[_0x5bec8f(0x14b)],'method':_0x5bec8f(0x13e)}),_0x3b4155=await axios({'url':_0xe39ba1[_0x5bec8f(0x136)],'method':_0x5bec8f(0x13e)}),_0x21322c=_0xe39ba1[_0x5bec8f(0x14c)][_0x5bec8f(0x139)]['map']((_0x18469d,_0x2dcc0c)=>{return _0x2dcc0c++,_0x969598+'_Tex'+_0x2dcc0c+'.png';});_0x51cc00=_0x51cc00[_0x5bec8f(0x149)],_0x3b4155=str_replace(_0xe39ba1['tex'][_0x5bec8f(0x139)],_0x21322c,_0x3b4155['data']);const _0x4df8f5=_0xe39ba1['tex'][_0x5bec8f(0x141)][_0x5bec8f(0x12d)](async(_0x3c0f42,_0xf8c125)=>{const _0x55d23c=_0x5bec8f;let _0x4e2d86=await axios({'url':_0x3c0f42,'method':'get','responseType':_0x55d23c(0x121)});await fs[_0x55d23c(0x114)](_0x361001+_0x55d23c(0x15b)+_0x969598+'/'+_0x21322c[_0xf8c125],Buffer['from'](_0x4e2d86[_0x55d23c(0x149)]));});await Promise[_0x5bec8f(0x13d)](_0x4df8f5),await fs[_0x5bec8f(0x114)](_0x361001+_0x5bec8f(0x15b)+_0x969598+'/'+_0x969598+_0x5bec8f(0x132),_0x51cc00),await fs[_0x5bec8f(0x114)](_0x361001+_0x5bec8f(0x15b)+_0x969598+'/'+_0x969598+_0x5bec8f(0x162),_0x3b4155);const _0xb020d0=_0x21322c[_0x5bec8f(0x12d)](_0x517856=>{const _0x80011a=_0x5bec8f;return _0x80011a(0x150)+_0x969598+'/'+_0x517856;}),_0x1b715a={'obj':_0x5bec8f(0x150)+_0x969598+'/'+_0x969598+_0x5bec8f(0x132),'mtl':'/cdn/user/'+_0x969598+'/'+_0x969598+_0x5bec8f(0x162),'tex':_0xb020d0},_0x5aa558={'message':_0x5bec8f(0x13f)+_0x969598+_0x5bec8f(0x14a),'data':_0x1b715a};return _0x5aa558;}catch(_0x4d1643){throw _0x4d1643;}}async[a0_0x2fc709(0x111)](_0x559fa3){const _0x169e44=a0_0x2fc709,_0x5b5e0c=new jszip();try{const _0x4b972b=await this[_0x169e44(0x15d)](_0x559fa3);await this[_0x169e44(0x137)](_0x4b972b);}catch(_0x5aa36e){throw new RBXException(_0x169e44(0x11c));}try{const _0x5ed02a=await this['getUIDbyUsername'](_0x559fa3),_0x4e7d5e=await this[_0x169e44(0x128)](_0x5ed02a);let _0x3bc57e=await axios({'url':_0x4e7d5e[_0x169e44(0x14b)],'method':_0x169e44(0x13e)}),_0x43c74=await axios({'url':_0x4e7d5e[_0x169e44(0x136)],'method':_0x169e44(0x13e)}),_0x237526=_0x4e7d5e[_0x169e44(0x14c)]['hash'][_0x169e44(0x12d)]((_0x3265d0,_0x408d82)=>{const _0x2206ac=_0x169e44;return _0x408d82++,_0x559fa3+_0x2206ac(0x127)+_0x408d82+_0x2206ac(0x13a);});_0x3bc57e=_0x3bc57e[_0x169e44(0x149)],_0x43c74=str_replace(_0x4e7d5e[_0x169e44(0x14c)][_0x169e44(0x139)],_0x237526,_0x43c74[_0x169e44(0x149)]);const _0x42318e=_0x4e7d5e['tex'][_0x169e44(0x141)]['map'](async(_0x2c703c,_0x26f732)=>{const _0x48fc4e=_0x169e44;let _0x1332ff=await axios({'url':_0x2c703c,'method':_0x48fc4e(0x13e),'responseType':'arraybuffer'});await _0x5b5e0c[_0x48fc4e(0x120)](_0x237526[_0x26f732],_0x1332ff[_0x48fc4e(0x149)]);});await Promise[_0x169e44(0x13d)](_0x42318e),await _0x5b5e0c['file'](_0x559fa3+_0x169e44(0x132),_0x3bc57e),await _0x5b5e0c['file'](_0x559fa3+_0x169e44(0x162),_0x43c74);const _0x14901b=await _0x5b5e0c[_0x169e44(0x12e)]({'type':_0x169e44(0x155)});return _0x14901b;}catch(_0x263723){throw _0x263723;}}async[a0_0x2fc709(0x14d)](_0x5be6cc){const _0x1f123b=a0_0x2fc709,_0x5c3484='https://catalog.roblox.com/v1/catalog/items/'+parseInt(_0x5be6cc)+'/details?itemType=Asset';try{const {data:_0x4e56b5}=await axios[_0x1f123b(0x13e)](_0x5c3484),_0x21b44e=await this[_0x1f123b(0x153)](_0x4e56b5['id']),_0x5d95b0={'creator_id':_0x4e56b5[_0x1f123b(0x131)],'creator_type':_0x4e56b5['creatorType'],'creator_name':_0x4e56b5['creatorName']},_0x44a544={'id':_0x4e56b5['id'],'imageUrl':_0x21b44e,'item_name':_0x4e56b5[_0x1f123b(0x135)],'item_about':_0x4e56b5['description'],'price':_0x4e56b5['price'],'creator':_0x5d95b0};return _0x44a544;}catch(_0x361195){throw _0x361195;}}async[a0_0x2fc709(0x153)](_0x2c652f){const _0x4a295f=a0_0x2fc709,_0x3b118e=_0x4a295f(0x133),_0x367dcb=[{'requestId':parseInt(_0x2c652f)+_0x4a295f(0x12a),'type':_0x4a295f(0x144),'targetId':parseInt(_0x2c652f),'token':'','format':_0x4a295f(0x116),'size':_0x4a295f(0x12c)}];try{const {data:_0xc19ddc}=await axios[_0x4a295f(0x130)](_0x3b118e,_0x367dcb);return _0xc19ddc[_0x4a295f(0x149)][0x0][_0x4a295f(0x11b)];}catch(_0x17a771){throw _0x17a771;}}async['getItemObj'](_0x593bd0){const _0x211680=a0_0x2fc709,_0x5cacab=_0x211680(0x147)+parseInt(_0x593bd0);try{const _0x12e973=await axios[_0x211680(0x13e)](_0x5cacab),{data:_0x54f5ad}=await axios[_0x211680(0x13e)](_0x12e973[_0x211680(0x149)][_0x211680(0x11b)]),_0x10f86f=_0x54f5ad[_0x211680(0x145)][_0x211680(0x12d)](_0xc9e0f2=>{return getHashUrl(_0xc9e0f2);}),_0x4fac42={'hash':_0x54f5ad[_0x211680(0x145)],'url':_0x10f86f},_0x43b243={'obj':getHashUrl(_0x54f5ad[_0x211680(0x14b)]),'mtl':getHashUrl(_0x54f5ad[_0x211680(0x136)]),'tex':_0x4fac42};return _0x43b243;}catch(_0x4fb263){throw _0x4fb263;}}async['saveItemObj'](_0x40fe36){const _0x6f1e33=a0_0x2fc709,_0x34d2fc=parseInt(_0x40fe36),_0x5056f2=this['dir'];try{await this['itemDetail'](_0x34d2fc);}catch(_0x14a849){throw new RBXException(_0x6f1e33(0x154));}try{await fs[_0x6f1e33(0x159)](_0x5056f2+_0x6f1e33(0x119)+_0x34d2fc);}catch(_0x48b1ef){await exec(_0x6f1e33(0x113)+_0x5056f2+_0x6f1e33(0x123)+_0x34d2fc);}try{const _0xf73ea7=await this[_0x6f1e33(0x148)](_0x34d2fc);let _0x20018e=await axios({'url':_0xf73ea7[_0x6f1e33(0x14b)],'method':'get'}),_0x3df49e=await axios({'url':_0xf73ea7['mtl'],'method':_0x6f1e33(0x13e)}),_0x5ebde8=_0xf73ea7[_0x6f1e33(0x14c)][_0x6f1e33(0x139)][_0x6f1e33(0x12d)]((_0x21200c,_0x3ed218)=>{const _0x4343c9=_0x6f1e33;return _0x3ed218++,_0x34d2fc+'_Tex'+_0x3ed218+_0x4343c9(0x13a);});_0x20018e=_0x20018e[_0x6f1e33(0x149)],_0x3df49e=str_replace(_0xf73ea7[_0x6f1e33(0x14c)][_0x6f1e33(0x139)],_0x5ebde8,_0x3df49e['data']);const _0x4e3ac3=_0xf73ea7[_0x6f1e33(0x14c)][_0x6f1e33(0x141)][_0x6f1e33(0x12d)](async(_0xfdb90a,_0x1d794d)=>{const _0x40fe07=_0x6f1e33;let _0x1f2338=await axios({'url':_0xfdb90a,'method':'get','responseType':'arraybuffer'});await fs[_0x40fe07(0x114)](_0x5056f2+'/item/'+_0x34d2fc+'/'+_0x5ebde8[_0x1d794d],Buffer['from'](_0x1f2338[_0x40fe07(0x149)]));});await Promise['all'](_0x4e3ac3),await fs[_0x6f1e33(0x114)](_0x5056f2+'/item/'+_0x34d2fc+'/'+_0x34d2fc+_0x6f1e33(0x132),_0x20018e),await fs[_0x6f1e33(0x114)](_0x5056f2+_0x6f1e33(0x119)+_0x34d2fc+'/'+_0x34d2fc+_0x6f1e33(0x162),_0x3df49e);const _0x487a22=_0x5ebde8[_0x6f1e33(0x12d)](_0x5189b3=>{const _0x34c3bf=_0x6f1e33;return _0x34c3bf(0x15a)+_0x34d2fc+'/'+_0x5189b3;}),_0x3cb2e7={'obj':'/cdn/item/'+_0x34d2fc+'/'+_0x34d2fc+'.obj','mtl':_0x6f1e33(0x15a)+_0x34d2fc+'/'+_0x34d2fc+_0x6f1e33(0x162),'tex':_0x487a22},_0x521a0b={'message':_0x6f1e33(0x13f)+_0x34d2fc+_0x6f1e33(0x11a),'data':_0x3cb2e7};return _0x521a0b;}catch(_0x35687e){throw _0x35687e;}}async['zipItemObjtoBuffer'](_0x1766f9){const _0x2b0f77=a0_0x2fc709,_0x1d62a9=parseInt(_0x1766f9),_0x5b1bea=this[_0x2b0f77(0x12f)];try{await this[_0x2b0f77(0x14d)](_0x1d62a9);}catch(_0x2a2f40){throw new RBXException(_0x2b0f77(0x154));}try{await fs[_0x2b0f77(0x159)](_0x5b1bea+_0x2b0f77(0x119)+_0x1d62a9);}catch(_0x35cbcd){await exec(_0x2b0f77(0x113)+_0x5b1bea+_0x2b0f77(0x123)+_0x1d62a9);}try{const _0xd64a84=await this['getItemObj'](_0x1d62a9);let _0x45e906=await axios({'url':_0xd64a84[_0x2b0f77(0x14b)],'method':_0x2b0f77(0x13e)}),_0x216bd8=await axios({'url':_0xd64a84[_0x2b0f77(0x136)],'method':_0x2b0f77(0x13e)}),_0x327314=_0xd64a84[_0x2b0f77(0x14c)][_0x2b0f77(0x139)][_0x2b0f77(0x12d)]((_0x2b9479,_0x56318c)=>{const _0x54de6c=_0x2b0f77;return _0x56318c++,_0x1d62a9+_0x54de6c(0x127)+_0x56318c+_0x54de6c(0x13a);});_0x45e906=_0x45e906[_0x2b0f77(0x149)],_0x216bd8=str_replace(_0xd64a84['tex'][_0x2b0f77(0x139)],_0x327314,_0x216bd8['data']);const _0xf0b5f3=_0xd64a84['tex'][_0x2b0f77(0x141)]['map'](async(_0xd436a5,_0x2a075d)=>{const _0x4ddf41=_0x2b0f77;let _0x202ef9=await axios({'url':_0xd436a5,'method':_0x4ddf41(0x13e),'responseType':_0x4ddf41(0x121)});await zip['file'](_0x327314[_0x2a075d],_0x202ef9[_0x4ddf41(0x149)]);});await Promise['all'](_0xf0b5f3),await zip[_0x2b0f77(0x120)](_0x1d62a9+_0x2b0f77(0x132),_0x45e906),await zip[_0x2b0f77(0x120)](_0x1d62a9+_0x2b0f77(0x162),_0x216bd8);const _0x29be6a=await zip[_0x2b0f77(0x12e)]({'type':'nodebuffer'});return _0x29be6a;}catch(_0x48dca6){throw _0x48dca6;}}async[a0_0x2fc709(0x126)](){const _0x4ec7f5=a0_0x2fc709;try{await exec(_0x4ec7f5(0x113)+this[_0x4ec7f5(0x12f)]+_0x4ec7f5(0x14e));const _0x19178a={'message':_0x4ec7f5(0x146)};return _0x19178a;}catch(_0x380c56){console[_0x4ec7f5(0x151)](_0x380c56);}}}function a0_0x55ed(_0x575b36,_0x28c9d4){const _0x115114=a0_0x1151();return a0_0x55ed=function(_0x55edb8,_0x40c64d){_0x55edb8=_0x55edb8-0x111;let _0x5cc4d4=_0x115114[_0x55edb8];return _0x5cc4d4;},a0_0x55ed(_0x575b36,_0x28c9d4);}module['exports']=RBX;